% begin_ohpc_run
% ohpc_validation_newline 
% ohpc_validation_comment Enable Optional packages
% ohpc_validation_newline
% ohpc_command if [[ ${enable_lustre_client} -eq 1 ]];then
% ohpc_indent 5

% ohpc_validation_comment Install Lustre client on master
\begin{lstlisting}[language=bash,keywords={},upquote=true]
# Add Lustre client software to master host
[sms](*\#*) (*\install*) lustre-client-ohpc lustre-client-ohpc-modules
\end{lstlisting}
% end_ohpc_run

% begin_ohpc_run
% ohpc_validation_comment Enable lustre on compute nodes
\begin{lstlisting}[language=bash,keywords={},upquote=true]
# Enable lustre on compute nodes
[sms](*\#*) echo "(*\install*) lustre-client-ohpc lustre-client-ohpc-modules" >> $postbootscript

# Create mount point and file system mount
[sms](*\#*) echo "mkdir /mnt/lustre" >> $postbootscript
[sms](*\#*) echo "echo "\""${mgs_fs_name} /mnt/lustre lustre defaults,_netdev,localflock,retry=2 0 0"\"" \
        >> /etc/fstab" >> $postbootscript
\end{lstlisting}
% end_ohpc_run
